{"version":3,"file":"commonHelpers.js","sources":["../src/js/common.js","../src/js/refs.js","../src/js/api_service.js","../src/js/storage.js","../src/img/sprite.svg","../src/js/helpers/addToCart.js","../src/js/markupFunctions.js","../src/js/products.js","../src/main.js"],"sourcesContent":["const common = {\n  BASE_URL: 'https://food-boutique.b.goit.study/api',\n  LOCAL_CART_KEY: 'cart',\n  LOCAL_QUERY_KEY: 'query',\n  INIT_QUERY: { keyword: null, category: null, page: 1, limit: 6 },\n  PAGES: 'pages',\n};\n\nexport { common };\n","const refs = {\n  productList: document.querySelector('.product-list'),\n};\n\nexport { refs };\n","import axios from 'axios';\nimport { common } from './common';\n\n// get a list of all products\nasync function getData(query) {\n  // return object {page, perPage, results[], totalPages}\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n      params: query,\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get an object by ID\nasync function getDataId(id) {\n  // returns the card object\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products/${id}`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get a list of popular products\nasync function getPopular(limit) {\n  // returns an array of data\n  try {\n    let query = null;\n\n    if (limit) {\n      query = { limit: limit };\n    }\n    const response = await axios({\n      url: `${common.BASE_URL}/products/popular`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n      params: query,\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get a list of products with a discount\nasync function getDiscount() {\n  // returns an array of data\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products/discount`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get categories\nasync function getCategories() {\n  // returns an array of data\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products/categories`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// request to create a new order\nasync function createOrder(email, productList) {\n  // returns an object\n  try {\n    const response = await axios({\n      url: 'https://food-boutique.b.goit.study/api/orders1',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: {\n        email: email,\n        products: productList,\n      },\n    });\n    return response;\n  } catch (error) {\n    return error;\n  }\n}\n\n// request a subscription\nasync function createSubscription(email) {\n  // returns an object\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/subscription`,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: {\n        email: email,\n      },\n    });\n    return response;\n  } catch (error) {\n    return error;\n  }\n}\n\nexport {\n  getData,\n  getDataId,\n  getPopular,\n  getDiscount,\n  getCategories,\n  createOrder,\n  createSubscription,\n};\n","const save = (key, value) => {\n    try {\n      const serializedState = JSON.stringify(value);\n      localStorage.setItem(key, serializedState);\n    } catch (error) {\n      console.error('Set state error: ', error.message);\n    }\n  };\n  \n  const load = key => {\n    try {\n      const serializedState = localStorage.getItem(key);\n      return serializedState === null ? undefined : JSON.parse(serializedState);\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n  };\n  \n  export { save, load };\n  \n\n  \n  ","export default \"__VITE_ASSET__4192010f__\"","import iziToast from 'izitoast';\nimport '../../../node_modules/izitoast/dist/css/iziToast.min.css';\nimport svg_sprite from '../../img/sprite.svg';\n\nconst addToCart = evt => {\n  const { id } = evt.target.closest('.js-card').dataset;\n\n  evt.target.closest(\n    '.js-cart'\n  ).innerHTML = ` <svg class=\"card-btn-icon-check\" width=\"18\" height=\"18\">\n                      <use href=\"${svg_sprite}#check\"></use>\n                    </svg>`;\n\n  iziToast.success({\n    message: 'Successfully added to cart',\n  });\n};\n\nexport { addToCart };\n","import svg_sprite from '../img/sprite.svg';\n\nconst productMarkup = arrey => {\n  if (!arrey.length) {\n    return;\n  }\n  return arrey\n    .map(\n      ({\n        _id,\n        name,\n        img,\n        category,\n        price,\n        size,\n        is10PercentOff,\n        popularity,\n      }) => {\n        if (!is10PercentOff) {\n          return `<li class=\"card js-card\" data-id=${_id}>\n            <div class=\"card-top\">\n  \n              <div class=\"card-img-wrapper\">\n                  <img src=\"${img}\" alt=\"${name}\" width=\"140\" height=\"140\" loading=\"lazy\"/>\n              </div>\n  \n              <h3 class=\"card-product-name\">${name}</h3>\n  \n              <ul class=\"card-prodcuts-list\">\n                  <li class=\"card-prodcuts-item\">Category:\n                    <span>${category.replace('_', ' ')}</span>\n                  </li>\n                  <li class=\"card-prodcuts-item\">Size:\n                    <span>${size}</span>\n                  </li>\n                  <li class=\"card-prodcuts-item\">Popularity:\n                    <span>${popularity}</span>\n                  </li>\n              </ul>\n              \n            </div>\n  \n            <div class=\"card-bottom\">\n              <p class=\"card-producs-price\">$${price}</p>\n  \n              <button class=\"card-btn js-cart\" type=\"button\">\n  \n                  <svg class=\"card-btn-icon\" width=\"18\" height=\"18\">\n                      <use href=\"${svg_sprite}#cart\"></use>\n                  </svg>\n  \n              </button>\n  \n            </div>\n        </li>`;\n        } else {\n          return `<li class=\"card js-card\" data-id=${_id}>\n            <div class=\"card-top\">\n  \n              <div class=\"card-img-wrapper\">\n                  <img src=\"${img}\" alt=\"${name}\" width=\"140\" height=\"140\" loading=\"lazy\"/>\n              </div>\n  \n              <h3 class=\"card-product-name\">${name}</h3>\n  \n              <ul class=\"card-prodcuts-list\">\n                  <li class=\"card-prodcuts-item\">Category: <span>${category.replace(\n                    '_',\n                    ' '\n                  )}</span></li>\n                  <li class=\"card-prodcuts-item\">Size: <span>${size}</span></li>\n                  <li class=\"card-prodcuts-item\">Popularity: <span>${popularity}</span></li>\n              </ul>\n            </div>\n  \n            <div class=\"card-bottom\">\n              <p class=\"card-producs-price\">$${price}</p>\n  \n              <button class=\"card-btn js-cart\" type=\"button\">\n                  <svg class=\"card-btn-icon\" width=\"18\" height=\"18\">\n                      <use href=\"${svg_sprite}#cart\"></use>\n                  </svg>\n              </button>\n              <svg class=\"discount-icon\" width=\"60\" height=\"60\">\n                <use href=\"${svg_sprite}#discount\"></use>\n              </svg>\n              \n            </div>\n        </li>`;\n        }\n      }\n    )\n    .join('');\n};\n\nconst errorMarkup = (element, status) => {\n  element.innerHTML = ` <div class=\"error_box\">\n                                <p class=\"error_title\">\n                                    Error<span>${status}</span>\n                                </p>\n                                <p class=\"error_text\">\n                                    Ой, щось пішло не так ....\n                                </p>\n                              </div>\n  `;\n};\n\nconst notFoundMarkup = element => {\n  element.innerHTML = `<div class=\"notFound_box\">\n                              <p class=\"notFound_title\">\n                                  Nothing was found for the selected <span>filters...</span>\n                              </p>\n                              <p class=\"notFound_text\">\n                                Try adjusting your search parameters or browse our range by other criteria to\n                                find the perfect product for you.\n                              </p>\n                              </div>\n                            `;\n};\n\nexport { productMarkup, errorMarkup, notFoundMarkup };\n","import { common } from './common';\nimport { refs } from './refs';\nimport { getData } from './api_service';\nimport { save, load } from './storage';\nimport { addToCart } from './helpers/addToCart';\nimport { productMarkup, notFoundMarkup } from './markupFunctions';\n\nconst renderProducts = async query => {\n  const data = await getData(query);\n\n  if (!data.results.length) {\n    notFoundMarkup(refs.productList);\n    return;\n  }\n\n  save(common.PAGES, {\n    page: data.page,\n    perPage: data.perPage,\n    totalPages: data.totalPages,\n  });\n\n  refs.productList.innerHTML = productMarkup(data.results);\n};\n\nconst onProductList = evt => {\n  evt.preventDefault();\n\n  if (evt.target.closest('.js-cart')) {\n    addToCart(evt);\n  }\n\n  if (evt.target.classList.contains('js-info')) {\n    openModal(evt);\n  }\n};\n\nrefs.productList.addEventListener('click', onProductList);\n\nexport { renderProducts };\n","import { renderProducts } from './js/products';\nimport { save, load } from './js/storage';\nimport { common } from './js/common';\n\nsave(common.LOCAL_QUERY_KEY, common.INIT_QUERY);\n\nconst storage_query = load(common.LOCAL_QUERY_KEY) ?? [];\nconsole.log(storage_query);\n\nrenderProducts(storage_query);\n"],"names":["common","refs","getData","query","axios","error","save","key","value","serializedState","load","svg_sprite","addToCart","evt","iziToast","productMarkup","arrey","_id","name","img","category","price","size","is10PercentOff","popularity","notFoundMarkup","element","renderProducts","data","onProductList","storage_query"],"mappings":"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"}