{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart.js"],"sourcesContent":["\nimport { load, save, remove } from './storage';\nimport { common } from './common';\nimport { producCartMarkup } from './markupFunctions';\n\n\nconst cartList = document.querySelector('.cart-product-list');\n\n\n\nconst cart = load(common.LOCAL_CART_KEY) ?? [];\n\nconsole.log(cart.length);\nconsole.log(cart);\n\n/**\n  |============================\n  | \n  |============================\n*/\nconst validClose = productId => {\n  // Знаходимо індекс елемента за _id\n  const index = cart.findIndex(({ _id }) => _id === productId);\n\n  console.log('Index:', index);\n\n  // Перевірка, чи елемент знайдено за вказаним _id\n  if (index !== -1) {\n    // Отримуємо об'єкт за індексом\n    const product = cart[index];\n\n    // Отримуємо ціну з об'єкта\n    const price = product.price;\n\n    console.log('Price:', price);\n    const summary = {};\n    // Видалення елемента за індексом\n    cart.splice(index, 1);\n  \n\n    // Оновлення локального сховища\n    remove(common.LOCAL_CART_KEY);\n    save(common.LOCAL_CART_KEY, cart);\n\n    // Оновлення відображення кошика\n    cartList.innerHTML = producCartMarkup(cart);\n  } else {\n    console.log('Product not found.');\n  }\n};\n\n/**\n  |============================\n  | \n  |============================\n*/\n\n// const validClose = productId => {\n//   const index = cart.findIndex(({ _id }) => _id === productId);\n\n//   console.log(index);\n\n//   cart.splice(index, 1);\n\n//   remove(common.LOCAL_CART_KEY);\n\n//   save(common.LOCAL_CART_KEY, cart);\n\n//   cartList.innerHTML = producCartMarkup(cart);\n// };\n\nconst onClose = evt => {\n  if (evt.currentTarget === evt.target) {\n    return;\n  }\n\n  const id = evt.target.closest('.js-card').dataset.id;\n  console.log(evt.target);\n  \n  if (evt.target.classList.contains('js-close')) {\n    validClose(id);\n  }\n};\n\n\n\nconst deleteAllButton = document.getElementById('deleteAllButton');\n\n// Функція для очищення значення ключа \"cart\" у локальному сховищі\nfunction clearCartLocalStorage() {\n  localStorage.setItem('cart', '[]');\n  location.reload();\n}\n\n// Додавання обробника подій для кнопки \"Delete all\"\ndeleteAllButton.addEventListener('click', clearCartLocalStorage);\n\n\n\nconst renderCart = () => {\n\n  if (cart.length > 3) {\n    // Застосування вертикального скролу\n    cartList.classList.add('scrollable');\n  }\n\n  cartList.innerHTML = producCartMarkup(cart);\n  cartList.addEventListener('click', onClose);\n};\n\nrenderCart();\n\n\n"],"names":["cartList","cart","load","common","validClose","productId","index","_id","price","remove","save","producCartMarkup","onClose","evt","id","deleteAllButton","clearCartLocalStorage","renderCart"],"mappings":"qFAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EAItDC,EAAOC,EAAKC,EAAO,cAAc,GAAK,CAAA,EAE5C,QAAQ,IAAIF,EAAK,MAAM,EACvB,QAAQ,IAAIA,CAAI,EAOhB,MAAMG,EAAaC,GAAa,CAE9B,MAAMC,EAAQL,EAAK,UAAU,CAAC,CAAE,IAAAM,KAAUA,IAAQF,CAAS,EAK3D,GAHA,QAAQ,IAAI,SAAUC,CAAK,EAGvBA,IAAU,GAAI,CAKhB,MAAME,EAHUP,EAAKK,GAGC,MAEtB,QAAQ,IAAI,SAAUE,CAAK,EAG3BP,EAAK,OAAOK,EAAO,CAAC,EAIpBG,EAAON,EAAO,cAAc,EAC5BO,EAAKP,EAAO,eAAgBF,CAAI,EAGhCD,EAAS,UAAYW,EAAiBV,CAAI,CAC9C,MACI,QAAQ,IAAI,oBAAoB,CAEpC,EAsBMW,EAAUC,GAAO,CACrB,GAAIA,EAAI,gBAAkBA,EAAI,OAC5B,OAGF,MAAMC,EAAKD,EAAI,OAAO,QAAQ,UAAU,EAAE,QAAQ,GAClD,QAAQ,IAAIA,EAAI,MAAM,EAElBA,EAAI,OAAO,UAAU,SAAS,UAAU,GAC1CT,EAAWU,CAAE,CAEjB,EAIMC,EAAkB,SAAS,eAAe,iBAAiB,EAGjE,SAASC,GAAwB,CAC/B,aAAa,QAAQ,OAAQ,IAAI,EACjC,SAAS,OAAM,CACjB,CAGAD,EAAgB,iBAAiB,QAASC,CAAqB,EAI/D,MAAMC,EAAa,IAAM,CAEnBhB,EAAK,OAAS,GAEhBD,EAAS,UAAU,IAAI,YAAY,EAGrCA,EAAS,UAAYW,EAAiBV,CAAI,EAC1CD,EAAS,iBAAiB,QAASY,CAAO,CAC5C,EAEAK,EAAY"}