import{c as a,l as o,s as n,b as _,r as s,n as L,d as g,e as A,f as b,g as f,h as C}from"./assets/refs-a1c92229.js";import{a as u}from"./assets/vendor-b325e1ef.js";async function P(e){try{return(await u({url:`${a.BASE_URL}/products`,method:"GET",header:{"Content-Type":"aplication/json"},params:e})).data}catch(t){return t}}async function Y(e){try{return(await u({url:`${a.BASE_URL}/products/${e}`,method:"GET",header:{"Content-Type":"aplication/json"}})).data}catch(t){return t}}async function k(e){try{let t=null;return e&&(t={limit:e}),(await u({url:`${a.BASE_URL}/products/popular`,method:"GET",header:{"Content-Type":"aplication/json"},params:t})).data}catch(t){return t}}async function R(){try{return(await u({url:`${a.BASE_URL}/products/discount`,method:"GET",header:{"Content-Type":"aplication/json"}})).data}catch(e){return e}}async function T(){try{return(await u({url:`${a.BASE_URL}/products/categories`,method:"GET",header:{"Content-Type":"aplication/json"}})).data}catch(e){return e}}const p=o(a.LOCAL_CART_KEY)??[],y=async e=>{const{id:t}=e.target.closest(".js-card").dataset,r=await Y(t);p.some(({_id:i})=>i===r._id)||(p.push(r),n(a.LOCAL_CART_KEY,p),e.target.closest(".js-cart").innerHTML=`<button class="btn-check js-cart" type="button">
   <svg class="icon-check" width="18" height="18">
                               <use href="${_}#check"></use>
                           </svg>
                         </button>`)},l=async e=>{const t=await P(e);if(!t.results.length){L(s.productList);return}n(a.PAGES,{page:t.page,perPage:t.perPage,totalPages:t.totalPages}),s.productList.innerHTML=g(t.results)},m=e=>{e.preventDefault(),e.target.closest(".js-cart")&&y(e),e.target.classList.contains("js-info")&&openModal(e)};s.productList.addEventListener("click",m);let d=[];const v=[{value:"alphabetical",label:"A to Z"},{value:"reverse-alphabetical",label:"Z to A"},{value:"cheap",label:"Cheap"},{value:"expensive",label:"Expensive"},{value:"popular",label:"Popular"},{value:"not-popular",label:"Not popular"},{value:"",label:"Show all"}],S=async()=>{d=[...await T(),"Show_all"];const t=A(d);s.categoryField.insertAdjacentHTML("beforeend",t),s.abcField.innerHTML=b(v)},U=e=>{const t=e.target.value,r=o(a.LOCAL_QUERY_KEY);t==="Show_all"?r.category=null:r.category=t,n(a.LOCAL_QUERY_KEY,r);const c=o(a.LOCAL_QUERY_KEY);l(c)},w=e=>{e.preventDefault();const t=s.searchField.value,r=o(a.LOCAL_QUERY_KEY);t?r.keyword=t:r.keyword=null,n(a.LOCAL_QUERY_KEY,r);const c=o(a.LOCAL_QUERY_KEY);l(c)},Q=async e=>{const t=e.target.value,r=o(a.LOCAL_QUERY_KEY);r.sort=t,n(a.LOCAL_QUERY_KEY,r);const c=o(a.LOCAL_QUERY_KEY),i=c.sort,E=O(i),h=await K(c,E);M(h)},O=e=>{let t={};switch(e){case"alphabetical":t="&byABC=true";break;case"reverse-alphabetical":t="&byABC=false";break;case"cheap":t="&byPrice=true";break;case"expensive":t="&byPrice=false";break;case"popular":t="&byPopularity=false";break;case"not-popular":t="&byPopularity=true";break}return t};async function K(e,t){try{return(await u({url:`${a.BASE_URL}/products?${t}`,method:"GET",header:{"Content-Type":"application/json"},params:e})).data}catch(r){return r}}const M=async e=>{if(!e.results.length){L(s.productList);return}n(a.PAGES,{page:e.page,perPage:e.perPage,totalPages:e.totalPages}),s.productList.innerHTML=g(e.results)},j=e=>{if(e.target.value===""){const t=o(a.LOCAL_QUERY_KEY);t.keyword=null,n(a.LOCAL_QUERY_KEY,t);const r=o(a.LOCAL_QUERY_KEY);l(r)}};s.form.addEventListener("submit",w);s.categoryField.addEventListener("change",U);s.abcField.addEventListener("change",Q);s.searchField.addEventListener("input",j);const F=async()=>{const e=await k();if(!e.length){notFoundMarkup(s.popularProductList);return}n(a.PAGES,{page:e.page,perPage:e.perPage,totalPages:e.totalPages});const t=f(e);s.popularProductList.insertAdjacentHTML("beforeend",t)},$=e=>{e.preventDefault(),e.target.closest(".js-cart")&&y(e),e.target.classList.contains("js-info")&&openModal(e)};s.popularProductList.addEventListener("click",$);const D=async()=>{const e=await R(),t=C(e.slice(0,2));s.dicsProd.innerHTML=t},G=()=>{};s.discProdList.addEventListener("click",G());n(a.LOCAL_QUERY_KEY,a.INIT_QUERY);const B=o(a.LOCAL_QUERY_KEY)??[];S();l(B);F();D();
//# sourceMappingURL=commonHelpers2.js.map
