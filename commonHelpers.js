import{l as d,s,c as a,a as g,b as E,o as A,r,p as m,d as f}from"./assets/madalMarkups-60818945.js";import"./assets/vendor-85c19974.js";const i=d(a.LOCAL_CART_KEY)??[];i.forEach(t=>{t.amount=1});s(a.ORDER,i);console.log(i);async function y(){const t=document.getElementById("user-email").value,e=d(a.LOCAL_CART_KEY)??[];e.forEach(n=>{n.amount=1}),s(a.ORDER,e),console.log(e);const o=e.map(n=>({productId:n._id,amount:n.amount}));try{const n=await g(t,o);console.log("Відповідь на замовлення:",n),console.log(t,o);const l=E(e);A(p,l),setTimeout(()=>{s(a.LOCAL_CART_KEY,[]),s(a.ORDER,[]),location.reload()},2e3),console.log("Відповідь на замовлення:",n)}catch(n){console.error("Помилка при замовленні:",n)}}const p=document.getElementById("checkoutButton");p.addEventListener("click",function(t){t.preventDefault(),y()});const _="/foodShop/assets/yellow_shopping_basket-566aede4.png",c=d(a.LOCAL_CART_KEY)??[],h=document.querySelector(".order-container"),C=()=>{const t=c.length;r.productsCount.textContent=`(${t})`,r.productsCountHeader.textContent=`(${t})`},k=t=>{const e=c.findIndex(({_id:o})=>o===t);console.log(e),c.splice(e,1),f(a.LOCAL_CART_KEY),s(a.LOCAL_CART_KEY,c),r.cartList.innerHTML=m(c),L(),C()},T=t=>{if(t.currentTarget===t.target)return;const e=t.target.closest(".js-card").dataset.id;console.log(t.target),t.target.classList.contains("js-close")&&k(e)},L=()=>{const t=c.reduce((e,o)=>e+o.price,0).toFixed(2);r.totalAmountDisplay.textContent=`$${t}`},O=()=>{localStorage.setItem("cart","[]"),location.reload()},R=()=>{r.cartList.innerHTML=`<li><img class="basket-img" src="${_}" alt="Yellow empty basket">
  <div class="basket-text">
      <p class="empty-text"> Your basket is <span>empty...</span></p>
      <p class="empty-comment">Go to the main page to select your favorite products and add them to the cart.</p>
  </div></li>`,h.innerHTML="",r.deleteAllButton.innerHTML=""},v=()=>{if(c.length>3&&r.cartList.classList.add("scrollable"),!c.length){R();return}r.cartList.innerHTML=m(c),r.cartList.addEventListener("click",T),L()},x=document.querySelectorAll(".counter-pr");x.forEach(t=>{const e=t.querySelector("#value");let o=0;const n=t.querySelector('[data-action="decrement"]'),l=t.querySelector('[data-action="increment"]');n.addEventListener("click",()=>{o>0&&(o-=1,u(e,o))}),l.addEventListener("click",()=>{o+=1,u(e,o)})});const u=(t,e)=>{t.textContent=e};C();v();r.deleteAllButton.addEventListener("click",O);
//# sourceMappingURL=commonHelpers.js.map
