{"version":3,"file":"commonHelpers.js","sources":["../src/js/validationOrder.js","../src/img/yellow_shopping_basket.png","../src/js/cart_2.js"],"sourcesContent":["\nconst buttonCheck = document.querySelector('.order-submit');\n\nfunction validateEmail() {\n    const emailInput = document.querySelector(\".order-box-input\").value;\n    console.log(emailInput);\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;  // pattern\n\n\nif (emailRegex.test(emailInput)) {\n    console.log(emailRegex.test(emailInput));\n    alert(\"Email is valid!\"); // valid\n} else {\n    console.log(emailRegex.test(emailInput));\n    alert(\"Invalid email format!\"); // invalid\n}\n}\n\n\nif (buttonCheck) {\n    buttonCheck.addEventListener('click', function(event) {\n    event.preventDefault();\n    validateEmail();\n});\n}\n\nexport { validateEmail }","export default \"__VITE_ASSET__d35d7aca__\"","import { load, save, remove } from './storage';\nimport { common } from './common';\nimport emty_cart from '../img/yellow_shopping_basket.png';\nimport { createOrder } from './api_service';\n\nconst refs = {\n  cartList: document.querySelector('.cart-list'),\n  deleteAll: document.querySelector('.cart-delete-all'),\n  orderBox: document.querySelector('.order-box'),\n  orderForm: document.querySelector('.order-form'),\n};\n\nconst createCartListMarkup = arrey => {\n  if (!arrey.length) {\n    return `<li class=\"emty-cart\">\n                    <img src=\"${emty_cart}\" alt=\"Emty Cart\" class=\"emty-cart-img\" width=\"132\" height=\"114\" />\n                    <p class=\"emty-cart-title\">\n                        Your basket is <span class=\"accent\">empty...</span>\n                    </p>\n                    <p class=\"emty-cart-text\">\n                        Go to the main page to select your favorite products and add them to the\n                        cart.\n                    </p>\n            </li>`;\n  }\n\n  return arrey.map(({ _id, img, name, category, size, price }) => {\n    return `<li class=\"cart-item js-card\" data-id=\"${_id}\">\n                    <button class=\"cart-product-delete js-product-cart-delete\">\n                        <svg class=\"cart-product-delete-icon\" width=\"18\" height=\"18\">\n                            <use href=\"./img/sprite.svg#close\"></use>\n                        </svg>\n                    </button>\n\n                <img src=\"${img}\" alt=\"${name}\" class=\"cart-img\" />\n                <div class=\"cart-content\">\n                    <p class=\"cart-content-title\">${name}</p>\n                    <ul class=\"cart-content-list\">\n                        <li class=\"cart-content-item\">\n                        Category:\n                        <span class=\"cart-content-item-var\">${category}</span>\n                        </li>\n                        <li class=\"cart-content-item\">\n                        Size:\n                        <span class=\"cart-content-item-var\">${size}</span>\n                        </li>\n                    </ul>\n                    <div class=\"cart-content-bottom\">   \n                        <p class=\"cart-content-price\">$${price}</p>\n                      \n\n                        <div class=\"cart-content-bottom-addition\">\n                        <button class=\"cart-content-bottom\" type=\"button\" aria-label=\"subtraction\"><svg class=\"minus-icon\" width=\"18\" height=\"18\" aria-label=\"minus\">\n                            <use class=\"cart-minus-svg\" xlink:href=\"./img/sprite.svg#minus\"></use>\n                          </svg></button>\n\n                        <span class=\"quantity\">1</span>\n\n                        <button class=\"cart-content-bottom\" type=\"button\" aria-label=\"addition\"><svg class=\"plus-icon\" width=\"18\" height=\"18\" aria-label=\"plus\">\n                            <use class=\"cart-plus-svg\" xlink:href=\"./img/sprite.svg#plus\"></use>\n                          </svg></button>\n                      </div>\n\n                        \n                    </div>\n                </div>\n            </li>\n        `;\n  });\n};\n\nconst renderCartList = () => {\n  const currentCartList = load(common.LOCAL_CART_KEY) ?? [];\n\n  if (!currentCartList.length) {\n    refs.deleteAll.style.display = 'none';\n    refs.orderBox.style.display = 'none';\n    const markup = createCartListMarkup(currentCartList);\n    refs.cartList.innerHTML = markup;\n    return;\n  }\n\n  refs.deleteAll.style.display = 'flex';\n  refs.orderBox.style.display = 'block';\n\n  const markup = createCartListMarkup(currentCartList);\n\n  refs.cartList.innerHTML = markup;\n};\n\nconst cartCount = () => {\n  const cartCounter = document.querySelector('#product-count-cart');\n  const currValue = load(common.LOCAL_CART_KEY) ?? [];\n  cartCounter.innerHTML = `(${currValue.length})`;\n};\n\nconst onDeleteAll = () => {\n  save(common.LOCAL_CART_KEY, []);\n  renderCartList();\n};\n\nconst onCartListClick = evt => {\n  if (evt.currentTarget === evt.target) {\n    return;\n  }\n\n  if (evt.target.closest('.js-product-cart-delete')) {\n    const { id } = evt.target.closest('.js-card').dataset;\n\n    const currentCart = load(common.LOCAL_CART_KEY) ?? [];\n\n    const index = currentCart.findIndex(({ _id }) => _id === id);\n\n    currentCart.splice(index, 1);\n\n    remove(common.LOCAL_CART_KEY);\n\n    save(common.LOCAL_CART_KEY, currentCart);\n\n    // headerCount();\n\n    cartCount();\n    renderCartList();\n  }\n};\n\nconst totalAmount = () => {\n  const currCart = load(common.LOCAL_CART_KEY) ?? [];\n\n  if (!currCart.length) {\n    return;\n  }\n\n  const count = 1;\n\n  return currCart\n    .reduce((acc, product) => acc + product.price * count, 0)\n    .toFixed(2);\n};\n\nconsole.log(totalAmount());\n\nconst onOrderForm = evt => {\n  evt.preventDefault();\n  const email = document.querySelector('.order-box-input').value;\n\n  if (!email) {\n    alert('blank space');\n    return;\n  }\n\n  const testEmail = 'goodemail@gmail.com';\n\n  const currCart = load(common.LOCAL_CART_KEY) ?? [];\n\n  let orderList = [];\n\n  currCart.map(element => {\n    orderList.push({\n      productId: element._id,\n      amount: 1,\n    });\n  });\n\n  const data = JSON.stringify({\n    email: testEmail,\n    products: orderList,\n  });\n\n  createOrder(data);\n};\n\nrefs.orderForm.addEventListener('submit', onOrderForm);\n\nrefs.cartList.addEventListener('click', onCartListClick);\n\nrefs.deleteAll.addEventListener('click', onDeleteAll);\n\ncartCount();\nrenderCartList();\n"],"names":["buttonCheck","validateEmail","emailInput","emailRegex","event","empty_basket","refs","createCartListMarkup","arrey","_id","img","name","category","size","price","emty_cart","renderCartList","currentCartList","load","common","markup","cartCount","cartCounter","currValue","onDeleteAll","save","onCartListClick","evt","id","currentCart","index","remove","totalAmount","currCart","count","acc","product","onOrderForm","testEmail","orderList","element","data","createOrder"],"mappings":"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"}