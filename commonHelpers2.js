import{c as a,l as n,s as c,b as L,r as s,n as y,d as h,e as E,f as P,g as k,h as Y}from"./assets/refs-aae2997d.js";import{a as u,i as _,S as C}from"./assets/vendor-95a3a663.js";async function T(e){try{return(await u({url:`${a.BASE_URL}/products`,method:"GET",header:{"Content-Type":"aplication/json"},params:e})).data}catch(t){return t}}async function A(e){try{return(await u({url:`${a.BASE_URL}/products/${e}`,method:"GET",header:{"Content-Type":"aplication/json"}})).data}catch(t){return t}}async function m(e){try{let t=null;return e&&(t={limit:e}),(await u({url:`${a.BASE_URL}/products/popular`,method:"GET",header:{"Content-Type":"aplication/json"},params:t})).data}catch(t){return t}}async function S(){try{return(await u({url:`${a.BASE_URL}/products/discount`,method:"GET",header:{"Content-Type":"aplication/json"}})).data}catch(e){return e}}async function f(){try{return(await u({url:`${a.BASE_URL}/products/categories`,method:"GET",header:{"Content-Type":"aplication/json"}})).data}catch(e){return e}}const i=n(a.LOCAL_CART_KEY)??[],w=async e=>{const{id:t}=e.target.closest(".js-card").dataset,r=await A(t);i.some(({_id:l})=>l===r._id)||(i.push(r),c(a.LOCAL_CART_KEY,i),e.target.closest(".js-cart").innerHTML=`<button class="btn-check js-cart" type="button">
   <svg class="icon-check" width="18" height="18">
                               <use href="${L}#check"></use>
                           </svg>
                         </button>`,_.success({title:"OK",message:"Added to cart!"}))},R=async e=>{const{id:t}=e.target.closest(".js-card").dataset,r=await A(t);i.some(({_id:l})=>l===r._id)||(i.push(r),c(a.LOCAL_CART_KEY,i),e.target.closest(".js-cart").innerHTML=`<button class="popular-btn-check js-cart" type="button">
   <svg class="popular-icon-check" width="18" height="18">
                               <use href="${L}#check"></use>
                           </svg>
                         </button>`,_.success({title:"OK",message:"Added to cart!"}))},v=e=>{const t=n(a.LOCAL_CART_KEY)??[];return e.map(o=>t.some(({_id:p})=>p===o._id)?(o.isChecked=!0,o):(o.isChecked=!1,o))},d=async e=>{const t=await T(e);if(!t.results.length){y(s.productList);return}c(a.PAGES,{page:t.page,perPage:t.perPage,totalPages:t.totalPages});const r=v(t.results);s.productList.innerHTML=h(r)},O=e=>{e.preventDefault(),e.target.closest(".js-cart")&&w(e),e.target.classList.contains("js-info")&&openModal(e)};s.productList.addEventListener("click",O);new C({select:"#abcField",settings:{placeholderText:"A to Z",showSearch:!1}});const U=async()=>{const e=await f(),t=E(e);s.categoryField.insertAdjacentHTML("beforeend",t),new C({select:"#categoryField",settings:{placeholderText:"Categories",showSearch:!1}})};U();let g=[];const K=[{value:"alphabetical",label:"A to Z"},{value:"reverse-alphabetical",label:"Z to A"},{value:"cheap",label:"Cheap"},{value:"expensive",label:"Expensive"},{value:"popular",label:"Popular"},{value:"not-popular",label:"Not popular"},{value:"",label:"Show all"}],j=async()=>{g=[...await f(),"Show_all"];const t=E(g);s.categoryField.insertAdjacentHTML("beforeend",t),s.abcField.innerHTML=P(K)},Q=e=>{const t=e.target.value,r=n(a.LOCAL_QUERY_KEY);t==="Show_all"?r.category=null:r.category=t,c(a.LOCAL_QUERY_KEY,r);const o=n(a.LOCAL_QUERY_KEY);d(o)},M=e=>{e.preventDefault();const t=s.searchField.value,r=n(a.LOCAL_QUERY_KEY);t?r.keyword=t:r.keyword=null,c(a.LOCAL_QUERY_KEY,r);const o=n(a.LOCAL_QUERY_KEY);d(o)},F=async e=>{const t=e.target.value,r=n(a.LOCAL_QUERY_KEY);r.sort=t,c(a.LOCAL_QUERY_KEY,r);const o=n(a.LOCAL_QUERY_KEY),l=o.sort,p=$(l),b=await D(o,p);G(b)},$=e=>{let t={};switch(e){case"alphabetical":t="&byABC=true";break;case"reverse-alphabetical":t="&byABC=false";break;case"cheap":t="&byPrice=true";break;case"expensive":t="&byPrice=false";break;case"popular":t="&byPopularity=false";break;case"not-popular":t="&byPopularity=true";break}return t};async function D(e,t){try{return(await u({url:`${a.BASE_URL}/products?${t}`,method:"GET",header:{"Content-Type":"application/json"},params:e})).data}catch(r){return r}}const G=async e=>{if(!e.results.length){y(s.productList);return}c(a.PAGES,{page:e.page,perPage:e.perPage,totalPages:e.totalPages}),s.productList.innerHTML=h(e.results)},H=e=>{if(e.target.value===""){const t=n(a.LOCAL_QUERY_KEY);t.keyword=null,c(a.LOCAL_QUERY_KEY,t);const r=n(a.LOCAL_QUERY_KEY);d(r)}};s.form.addEventListener("submit",M);s.categoryField.addEventListener("change",Q);s.abcField.addEventListener("change",F);s.searchField.addEventListener("input",H);const B=async()=>{const e=await m();if(!e.length){notFoundMarkup(s.popularProductList);return}c(a.PAGES,{page:e.page,perPage:e.perPage,totalPages:e.totalPages});const t=k(e);s.popularProductList.insertAdjacentHTML("beforeend",t)},q=e=>{e.preventDefault(),e.target.closest(".js-cart")&&R(e),e.target.classList.contains("js-info")&&openModal(e)};s.popularProductList.addEventListener("click",q);const x=async()=>{const e=await S(),t=Y(e.slice(0,2));s.dicsProd.innerHTML=t},I=()=>{};s.discProdList.addEventListener("click",I());c(a.LOCAL_QUERY_KEY,a.INIT_QUERY);const Z=n(a.LOCAL_QUERY_KEY)??[];j();d(Z);B();x();const N=[5,12,8,130,44],V=N.find(e=>e===12);console.log(V);
//# sourceMappingURL=commonHelpers2.js.map
