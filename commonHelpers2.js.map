{"version":3,"file":"commonHelpers2.js","sources":["../src/js/api_service.js","../src/js/helpers/addToCart.js","../src/js/pagination.js","../src/js/helpers/validChecked.js","../src/js/products.js","../src/js/filters.js","../src/js/popular.js","../src/js/helpers/getRandomProduct.js","../src/js/dicsount_products.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { common } from './common';\n\n// get a list of all products\nasync function getData(query) {\n  // return object {page, perPage, results[], totalPages}\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n\n      params: query,\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get an object by ID\nasync function getDataId(id) {\n  // returns the card object\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products/${id}`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// get a list of popular products\nasync function getPopular(limit) {\n  // returns an array of data\n  try {\n    let query = null;\n\n    if (limit) {\n      query = { limit: limit };\n    }\n    const response = await axios({\n      url: `${common.BASE_URL}/products/popular`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n\n      params: query,\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get a list of products with a discount\nasync function getDiscount() {\n  // returns an array of data\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products/discount`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// get categories\nasync function getCategories() {\n  // returns an array of data\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products/categories`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'aplication/json',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\n// request to create a new order\nasync function createOrder(email, productList) {\n  // returns an object\n  try {\n    const response = await axios({\n      url: 'https://food-boutique.b.goit.study/api/orders1',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: {\n        email: email,\n        products: productList,\n      },\n    });\n    return response;\n  } catch (error) {\n    return error;\n  }\n}\n\n// request a subscription\nasync function createSubscription(email) {\n  // returns an object\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/subscription`,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: {\n        email: email,\n      },\n    });\n\n    return response.status;\n  } catch (error) {\n    return error.response.status;\n  }\n}\n\nexport {\n  getData,\n  getDataId,\n  getPopular,\n  getDiscount,\n  getCategories,\n  createOrder,\n  createSubscription,\n};\n","import iziToast from 'izitoast';\nimport '../../../node_modules/izitoast/dist/css/iziToast.min.css';\nimport svg_sprite from '../../img/sprite.svg';\nimport { getDataId } from '../api_service';\nimport { save, load } from '../storage';\nimport { common } from '../common';\n\nconst cart = load(common.LOCAL_CART_KEY) ?? [];\n\nconst addToCart = async evt => {\n  const { id } = evt.target.closest('.js-card').dataset;\n\n  const product = await getDataId(id);\n\n  const inStorage = cart.some(({ _id }) => _id === product._id);\n\n  if (inStorage) {\n    return;\n  }\n\n  cart.push(product);\n  save(common.LOCAL_CART_KEY, cart);\n\n  evt.target.closest(\n    '.js-cart'\n  ).innerHTML = `<button class=\"card-btn\" type=\"button\">\n                    <svg class=\"card-btn-icon-check\" width=\"18\" height=\"18\">\n                        <use href=\"${svg_sprite}#check\"></use>\n                    </svg>\n                </button>`;\n  iziToast.success({\n    title: 'OK',\n    message: 'Added to cart!',\n  });\n};\n\nconst addToCartFromPopular = async evt => {\n  const { id } = evt.target.closest('.js-card').dataset;\n\n  const product = await getDataId(id);\n\n  const inStorage = cart.some(({ _id }) => _id === product._id);\n\n  if (inStorage) {\n    return;\n  }\n\n  cart.push(product);\n  save(common.LOCAL_CART_KEY, cart);\n\n  evt.target.closest(\n    '.js-cart'\n  ).innerHTML = `<button class=\"popular-card-btn\" type=\"button\">\n                    <svg class=\"popular-icon-check\" width=\"18\" height=\"18\">\n                      <use href=\"${svg_sprite}#check\"></use>\n                    </svg>\n                </button>`;\n\n  iziToast.success({\n    title: 'OK',\n    message: 'Added to cart!',\n  });\n};\n\nexport { addToCart, addToCartFromPopular };\n","import { getData } from './api_service';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { load, save } from './storage';\nimport { common } from './common';\nimport { refs } from './refs';\nimport { productMarkup } from './markupFunctions';\n\n\n// Отслеживаю вьюпорт\nlet visPagesPag;\nconst mediaQuery = window.matchMedia(\"(min-width: 768px)\");\n\nconst handleMediaChange = (event) => {\n  if (event.matches) {\n    visPagesPag = 4;\n    loadPaginationDataOnChangeViewport()\n  } else {\n    visPagesPag = 2;\n    loadPaginationDataOnChangeViewport()\n  }\n};\n\nhandleMediaChange(mediaQuery);\nmediaQuery.addEventListener(\"change\", handleMediaChange);\n\n//Функция создания и управления пагинацией при изменении вьюпорта\nfunction loadPaginationDataOnChangeViewport() {\n\n  const pagination = new Pagination(refs.paginationContainer, {\n    page: load('pages').page,\n    totalItems: load('pages').perPage * load('pages').totalPages,\n    itemsPerPage: load('pages').perPage,\n    visiblePages: visPagesPag,\n    centerAlign: true,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n  });\n\n  pagination.on('beforeMove', function (eventData) {\n    const pagesData = JSON.parse(localStorage.getItem('pages'));\n    pagesData.page = eventData.page;\n    localStorage.setItem('pages', JSON.stringify(pagesData));\n    const storage_query = JSON.parse(localStorage.getItem('pages'));\n\n    const currentQuery = load(common.LOCAL_QUERY_KEY);\n    currentQuery.page = storage_query.page;\n    save(common.LOCAL_QUERY_KEY, currentQuery);\n    const query = load(common.LOCAL_QUERY_KEY);\n\n    renderProductsOnPagination(query);\n  });\n\n  const data = JSON.parse(localStorage.getItem('pages'));\n  if (data.totalPages <= 1) {\n    refs.paginationContainer.style.display = \"none\";\n  } else {\n    refs.paginationContainer.style.display = \"block\";\n  }\n}\n\n\n//Функция создания и управления пагинацией, запускается в renderProducts() и в renderProductsSort().\nexport function loadPaginationData() {\n\n  const pagination = new Pagination(refs.paginationContainer, {\n    page: common.INIT_QUERY.page,\n    totalItems: load('pages').perPage * load('pages').totalPages,\n    itemsPerPage: load('pages').perPage,\n    visiblePages: visPagesPag,\n    centerAlign: true,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n  });\n\n  pagination.on('beforeMove', function (eventData) {\n    const pagesData = JSON.parse(localStorage.getItem('pages'));\n    pagesData.page = eventData.page;\n    localStorage.setItem('pages', JSON.stringify(pagesData));\n    const storage_query = JSON.parse(localStorage.getItem('pages'));\n\n    const currentQuery = load(common.LOCAL_QUERY_KEY);\n    currentQuery.page = storage_query.page;\n    save(common.LOCAL_QUERY_KEY, currentQuery);\n    const query = load(common.LOCAL_QUERY_KEY);\n\n    renderProductsOnPagination(query);\n  });\n\n  const data = JSON.parse(localStorage.getItem('pages'));\n  if (data.totalPages <= 1) {\n    refs.paginationContainer.style.display = \"none\";\n  } else {\n    refs.paginationContainer.style.display = \"block\";\n  }\n}\n\n\nasync function renderProductsOnPagination(query) {\n  const data = await getData(query);\n\n  if (!data.results.length) {\n    notFoundMarkup(refs.productList);\n    return;\n  }\n\n  refs.productList.innerHTML = productMarkup(data.results);\n}\n\n\n// В filters.js в функции onCategoryField(), onForm(), onAbcField(), onSearchField() добавлена строка \n// \"currQuery.page = '1';\" для коректного функционирования пагинации при фильтрации.\n// в refs.js добавллен контейнер \"paginationContainer\" для пагинации.","import { common } from '../common';\nimport { load } from '../storage';\n\nconst validChecked = products => {\n  const currentCartProducts = load(common.LOCAL_CART_KEY) ?? [];\n\n  const result = products.map(product => {\n    const isInclude = currentCartProducts.some(\n      ({ _id }) => _id === product._id\n    );\n\n    if (isInclude) {\n      product['isChecked'] = true;\n      return product;\n    } else {\n      product['isChecked'] = false;\n      return product;\n    }\n  });\n\n  return result;\n};\n\nexport { validChecked };\n","import { common } from './common';\nimport { refs } from './refs';\nimport { getData } from './api_service';\nimport { save, load } from './storage';\nimport { addToCart } from './helpers/addToCart';\nimport { productMarkup, notFoundMarkup } from './markupFunctions';\nimport { loadPaginationData } from './pagination';\nimport { validChecked } from './helpers/validChecked';\n\nconst renderProducts = async query => {\n  const data = await getData(query);\n\n  if (!data.results.length) {\n    notFoundMarkup(refs.productList);\n    return;\n  }\n\n  save(common.PAGES, {\n    page: data.page,\n    perPage: data.perPage,\n    totalPages: data.totalPages,\n  });\n\n  const result = validChecked(data.results);\n  refs.productList.innerHTML = productMarkup(result);\n  loadPaginationData();\n};\n\nconst onProductList = evt => {\n  evt.preventDefault();\n\n  if (evt.target.closest('.js-cart')) {\n    addToCart(evt);\n  }\n\n  if (evt.target.classList.contains('js-info')) {\n    openModal(evt);\n  }\n};\n\nrefs.productList.addEventListener('click', onProductList);\n\nexport { renderProducts };\n","import axios from 'axios';\nimport { common } from './common';\nimport { refs } from './refs';\nimport { productMarkup, notFoundMarkup } from './markupFunctions';\nimport { getCategories } from './api_service';\nimport { save, load } from './storage';\nimport { renderProducts } from './products';\nimport { createCategoryMarkup, createSortMarkup } from './markupFunctions';\nimport SlimSelect from 'slim-select';\nimport '../../node_modules/slim-select/dist/slimselect.css';\n\nimport { loadPaginationData } from './pagination';\n\nnew SlimSelect({\n  select: '#abcField',\n  settings: {\n    showSearch: false,\n  },\n});\n\nlet categories = [];\n\nconst sortArrey = [\n  { value: 'alphabetical', label: 'A to Z' },\n  { value: 'reverse-alphabetical', label: 'Z to A' },\n  { value: 'cheap', label: 'Cheap' },\n  { value: 'expensive', label: 'Expensive' },\n  { value: 'popular', label: 'Popular' },\n  { value: 'not-popular', label: 'Not popular' },\n  { value: '', label: 'Show all' },\n];\n\nconst renderSelects = async () => {\n  const data = await getCategories();\n\n  categories = [...data, 'Show_all'];\n\n  const markup = createCategoryMarkup(categories);\n\n  refs.categoryField.insertAdjacentHTML('beforeend', markup);\n  refs.abcField.innerHTML = createSortMarkup(sortArrey);\n\n  new SlimSelect({\n    select: '#categoryField',\n    settings: {\n      placeholderText: 'Categories',\n      showSearch: false,\n    },\n  });\n};\n\nconst onCategoryField = evt => {\n  const currentCategory = evt.target.value;\n  const currQuery = load(common.LOCAL_QUERY_KEY);\n  currQuery.page = '1';\n  if (currentCategory === 'Show_all') {\n    currQuery.category = null;\n  } else {\n    currQuery.category = currentCategory;\n  }\n  save(common.LOCAL_QUERY_KEY, currQuery);\n  const query = load(common.LOCAL_QUERY_KEY);\n  renderProducts(query);\n};\n\nconst onForm = evt => {\n  evt.preventDefault();\n  const currentValue = refs.searchField.value;\n  const currQuery = load(common.LOCAL_QUERY_KEY);\n  currQuery.page = '1';\n  if (!currentValue) {\n    currQuery.keyword = null;\n  } else {\n    currQuery.keyword = currentValue;\n  }\n  save(common.LOCAL_QUERY_KEY, currQuery);\n\n  const query = load(common.LOCAL_QUERY_KEY);\n  renderProducts(query);\n};\n\nconst onAbcField = async evt => {\n  const currentCategory = evt.target.value;\n  const currQuery = load(common.LOCAL_QUERY_KEY);\n\n  currQuery.sort = currentCategory;\n  save(common.LOCAL_QUERY_KEY, currQuery);\n\n  const query = load(common.LOCAL_QUERY_KEY);\n  const sortCategory = query.sort;\n\n  currQuery.page = '1';\n\n  const getSort = SortValue(sortCategory);\n\n  const result = await get(query, getSort);\n  renderProductsSort(result);\n};\n\nconst SortValue = sortCategory => {\n  let getSort = {};\n\n  switch (sortCategory) {\n    case 'alphabetical':\n      getSort = '&byABC=true';\n      break;\n    case 'reverse-alphabetical':\n      getSort = '&byABC=false';\n      break;\n    case 'cheap':\n      getSort = '&byPrice=true';\n      break;\n    case 'expensive':\n      getSort = '&byPrice=false';\n      break;\n    case 'popular':\n      getSort = '&byPopularity=false';\n      break;\n    case 'not-popular':\n      getSort = '&byPopularity=true';\n      break;\n    default:\n      break;\n  }\n\n  return getSort;\n};\n\nasync function get(query, getSort) {\n  try {\n    const response = await axios({\n      url: `${common.BASE_URL}/products?${getSort}`,\n      method: 'GET',\n      header: {\n        'Content-Type': 'application/json',\n      },\n      params: query,\n    });\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n\nconst renderProductsSort = async result => {\n  if (!result.results.length) {\n    notFoundMarkup(refs.productList);\n    return;\n  }\n  save(common.PAGES, {\n    page: result.page,\n    perPage: result.perPage,\n    totalPages: result.totalPages,\n  });\n  refs.productList.innerHTML = productMarkup(result.results);\n  loadPaginationData();\n};\n\nconst onSearchField = evt => {\n  if (evt.target.value === '') {\n    const currentQuery = load(common.LOCAL_QUERY_KEY);\n    currentQuery.page = '1';\n    currentQuery.keyword = null;\n    save(common.LOCAL_QUERY_KEY, currentQuery);\n    const query = load(common.LOCAL_QUERY_KEY);\n    renderProducts(query);\n  }\n};\n\nrefs.form.addEventListener('submit', onForm);\nrefs.categoryField.addEventListener('change', onCategoryField);\nrefs.abcField.addEventListener('change', onAbcField);\nrefs.searchField.addEventListener('input', onSearchField);\n\nexport { renderSelects };\n","import { common } from './common';\nimport { refs } from './refs';\nimport { getPopular } from './api_service';\nimport { save, load } from './storage';\nimport { createMarkupPopular } from './markupFunctions';\nimport { addToCartFromPopular } from './helpers/addToCart';\nimport { validChecked } from './helpers/validChecked';\n\nconst renderPopular = async () => {\n  const response = await getPopular();\n  if (!response.length) {\n    notFoundMarkup(refs.popularProductList);\n    return;\n  }\n  // save(common.PAGES, {\n  //   page: results.page,\n  //   perPage: results.perPage,\n  //   totalPages: results.totalPages,\n  // });\n\n  const results = validChecked(response);\n\n  const markup = createMarkupPopular(results);\n  refs.popularProductList.insertAdjacentHTML('beforeend', markup);\n};\n\nconst onPopularList = evt => {\n  evt.preventDefault();\n\n  if (evt.target.closest('.js-cart')) {\n    addToCartFromPopular(evt);\n  }\n\n  if (evt.target.classList.contains('js-info')) {\n    openModal(evt);\n  }\n};\n\nrefs.popularProductList.addEventListener('click', onPopularList);\n\nexport { renderPopular };\n","import { common } from '../common';\n\nconst getRandomProduct = arrey => {\n  const listRandomCards = [];\n  const additionalList = [];\n\n  while (listRandomCards.length < common.NUMBER_OF_DISCOUNT) {\n    const randomNumber = Math.floor(Math.random() * arrey.length);\n    if (additionalList.includes(randomNumber)) {\n      continue;\n    }\n    additionalList.push(randomNumber);\n    listRandomCards.push(arrey[randomNumber]);\n  }\n\n  return listRandomCards;\n};\n\nexport { getRandomProduct };\n","import { getDiscount } from './api_service';\nimport { refs } from './refs';\nimport { createDiscountMarkup } from './markupFunctions';\nimport { addToCart } from './helpers/addToCart';\nimport { getRandomProduct } from './helpers/getRandomProduct';\nimport { validChecked } from './helpers/validChecked';\n\n// fetch data\nconst dataDiscountProd = async () => {\n  const data = await getDiscount();\n  const randomProducts = getRandomProduct(data);\n\n  const result = validChecked(randomProducts);\n\n  const markup = createDiscountMarkup(result);\n  refs.dicsProd.innerHTML = markup;\n};\n\n// add to ul\n\n// add listner to products\n\nconst clickOnDiscount = evt => {\n  evt.preventDefault();\n\n  if (evt.target.closest('.js-cart')) {\n    addToCart(evt);\n  }\n\n  if (evt.target.classList.contains('js-info')) {\n    openModal(evt);\n  }\n};\n\nrefs.discProdList.addEventListener('click', clickOnDiscount);\n\nexport { dataDiscountProd };\n","import { renderProducts } from './js/products';\nimport { save, load } from './js/storage';\nimport { common } from './js/common';\nimport { renderSelects } from './js/filters';\nimport { renderPopular } from './js/popular';\nimport { dataDiscountProd } from './js/dicsount_products';\nimport './js/pagination';\n\nsave(common.LOCAL_QUERY_KEY, common.INIT_QUERY);\n\nconst storage_query = load(common.LOCAL_QUERY_KEY) ?? [];\n\nrenderSelects();\nrenderProducts(storage_query);\nrenderPopular();\ndataDiscountProd();\n"],"names":["getData","query","axios","common","error","getDataId","id","getPopular","limit","getDiscount","getCategories","cart","load","addToCart","evt","product","_id","save","svg_sprite","iziToast","addToCartFromPopular","visPagesPag","mediaQuery","handleMediaChange","event","loadPaginationDataOnChangeViewport","Pagination","refs","eventData","pagesData","storage_query","currentQuery","renderProductsOnPagination","loadPaginationData","data","productMarkup","validChecked","products","currentCartProducts","renderProducts","notFoundMarkup","result","onProductList","SlimSelect","categories","sortArrey","renderSelects","markup","createCategoryMarkup","createSortMarkup","onCategoryField","currentCategory","currQuery","onForm","currentValue","onAbcField","sortCategory","getSort","SortValue","get","renderProductsSort","onSearchField","renderPopular","response","results","createMarkupPopular","onPopularList","getRandomProduct","arrey","listRandomCards","additionalList","randomNumber","dataDiscountProd","randomProducts","createDiscountMarkup","clickOnDiscount"],"mappings":"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"}