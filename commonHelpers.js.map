{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart.js"],"sourcesContent":["\nimport { load, save, remove } from './storage';\nimport { common } from './common';\nimport { producCartMarkup } from './markupFunctions';\n\nconst totalAmountDisplay = document.querySelector('.total-amount');\nconst cartList = document.querySelector('.cart-product-list');\nconst deleteAllButton = document.getElementById('deleteAllButton');\nconst productsCount = document.getElementById('product-count');\nconst cart = load(common.LOCAL_CART_KEY) ?? [];\n\n\n\nconst renderItemCount = () => {\n  const itemCount = cart.length;\n  console.log(`Item Count: ${itemCount}`);\n  productsCount.textContent = `(${itemCount})`;\n};\nrenderItemCount();\n\nconst validClose = productId => {\n  const index = cart.findIndex(({ _id }) => _id === productId);\n\n  console.log(index);\n\n  cart.splice(index, 1);\n\n  remove(common.LOCAL_CART_KEY);\n\n  save(common.LOCAL_CART_KEY, cart);\n\n  cartList.innerHTML = producCartMarkup(cart);\n  renderTotalAmount(); // Оновлення суми при видаленні товару\n  renderItemCount();\n};\n\n\n\nconst onClose = evt => {\n  if (evt.currentTarget === evt.target) {\n    return;\n  }\n\n  const id = evt.target.closest('.js-card').dataset.id;\n  console.log(evt.target);\n  \n  if (evt.target.classList.contains('js-close')) {\n    validClose(id);\n  }\n};\n\nconst renderTotalAmount = () => {\n  const totalAmount = cart.reduce((acc, product) => acc + product.price, 0).toFixed(2);\n  totalAmountDisplay.textContent = `$${totalAmount}`;\n};\n\n\n// Функція для очищення значення ключа \"cart\" у локальному сховищі\nfunction clearCartLocalStorage() {\n  localStorage.setItem('cart', '[]');\n  location.reload();\n}\n\n// Додавання обробника подій для кнопки \"Delete all\"\ndeleteAllButton.addEventListener('click', clearCartLocalStorage);\n\n\n\nconst renderCart = () => {\n\n  if (cart.length > 3) {\n    // Застосування вертикального скролу\n    cartList.classList.add('scrollable');\n  }\n\n  cartList.innerHTML = producCartMarkup(cart);\n  cartList.addEventListener('click', onClose);\n  renderTotalAmount();\n};\n\nrenderCart();\n\n\n"],"names":["totalAmountDisplay","cartList","deleteAllButton","productsCount","cart","load","common","renderItemCount","itemCount","validClose","productId","index","_id","remove","save","producCartMarkup","renderTotalAmount","onClose","evt","id","totalAmount","acc","product","clearCartLocalStorage","renderCart"],"mappings":"qFAKA,MAAMA,EAAqB,SAAS,cAAc,eAAe,EAC3DC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAkB,SAAS,eAAe,iBAAiB,EAC3DC,EAAgB,SAAS,eAAe,eAAe,EACvDC,EAAOC,EAAKC,EAAO,cAAc,GAAK,CAAA,EAItCC,EAAkB,IAAM,CAC5B,MAAMC,EAAYJ,EAAK,OACvB,QAAQ,IAAI,eAAeI,GAAW,EACtCL,EAAc,YAAc,IAAIK,IAClC,EACAD,IAEA,MAAME,EAAaC,GAAa,CAC9B,MAAMC,EAAQP,EAAK,UAAU,CAAC,CAAE,IAAAQ,KAAUA,IAAQF,CAAS,EAE3D,QAAQ,IAAIC,CAAK,EAEjBP,EAAK,OAAOO,EAAO,CAAC,EAEpBE,EAAOP,EAAO,cAAc,EAE5BQ,EAAKR,EAAO,eAAgBF,CAAI,EAEhCH,EAAS,UAAYc,EAAiBX,CAAI,EAC1CY,IACAT,GACF,EAIMU,EAAUC,GAAO,CACrB,GAAIA,EAAI,gBAAkBA,EAAI,OAC5B,OAGF,MAAMC,EAAKD,EAAI,OAAO,QAAQ,UAAU,EAAE,QAAQ,GAClD,QAAQ,IAAIA,EAAI,MAAM,EAElBA,EAAI,OAAO,UAAU,SAAS,UAAU,GAC1CT,EAAWU,CAAE,CAEjB,EAEMH,EAAoB,IAAM,CAC9B,MAAMI,EAAchB,EAAK,OAAO,CAACiB,EAAKC,IAAYD,EAAMC,EAAQ,MAAO,CAAC,EAAE,QAAQ,CAAC,EACnFtB,EAAmB,YAAc,IAAIoB,GACvC,EAIA,SAASG,GAAwB,CAC/B,aAAa,QAAQ,OAAQ,IAAI,EACjC,SAAS,OAAM,CACjB,CAGArB,EAAgB,iBAAiB,QAASqB,CAAqB,EAI/D,MAAMC,EAAa,IAAM,CAEnBpB,EAAK,OAAS,GAEhBH,EAAS,UAAU,IAAI,YAAY,EAGrCA,EAAS,UAAYc,EAAiBX,CAAI,EAC1CH,EAAS,iBAAiB,QAASgB,CAAO,EAC1CD,GACF,EAEAQ,EAAY"}