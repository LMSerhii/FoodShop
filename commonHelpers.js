import{l,s,c as r,a as E,r as a,p as u,b as g}from"./assets/refs-2e332072.js";import"./assets/vendor-38dd3e46.js";const d=l(r.LOCAL_CART_KEY)??[];d.forEach(t=>{t.amount=1});s(r.ORDER,d);console.log(d);async function A(){const t=document.getElementById("user-email").value,e=l(r.LOCAL_CART_KEY)??[];e.forEach(n=>{n.amount=1}),s(r.ORDER,e),console.log(e);const o=e.map(n=>({productId:n._id,amount:n.amount}));try{const n=await E(t,o);console.log("Відповідь на замовлення:",n),console.log(t,o),setTimeout(()=>{s(r.LOCAL_CART_KEY,[]),s(r.ORDER,[]),location.reload()},2e3),console.log("Відповідь на замовлення:",n)}catch(n){console.error("Помилка при замовленні:",n)}}document.getElementById("checkoutButton").addEventListener("click",function(t){t.preventDefault(),A()});const c=l(r.LOCAL_CART_KEY)??[],m=()=>{const t=c.length;a.productsCount.textContent=`(${t})`,a.productsCountHeader.textContent=`(${t})`},p=t=>{const e=c.findIndex(({_id:o})=>o===t);console.log(e),c.splice(e,1),g(r.LOCAL_CART_KEY),s(r.LOCAL_CART_KEY,c),a.cartList.innerHTML=u(c),C(),m()},f=t=>{if(t.currentTarget===t.target)return;const e=t.target.closest(".js-card").dataset.id;console.log(t.target),t.target.classList.contains("js-close")&&p(e)},C=()=>{const t=c.reduce((e,o)=>e+o.price,0).toFixed(2);a.totalAmountDisplay.textContent=`$${t}`},R=()=>{localStorage.setItem("cart","[]"),location.reload()},_=()=>{c.length>3&&a.cartList.classList.add("scrollable"),a.cartList.innerHTML=u(c),a.cartList.addEventListener("click",f),C()},O=document.querySelectorAll(".counter-pr");O.forEach(t=>{const e=t.querySelector("#value");let o=0;const n=t.querySelector('[data-action="decrement"]'),L=t.querySelector('[data-action="increment"]');n.addEventListener("click",()=>{o>0&&(o-=1,i(e,o))}),L.addEventListener("click",()=>{o+=1,i(e,o)})});const i=(t,e)=>{t.textContent=e};m();_();a.deleteAllButton.addEventListener("click",R);
//# sourceMappingURL=commonHelpers.js.map
