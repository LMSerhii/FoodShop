import{l as c,c as a,g as h,s as i,f as w,r,h as k,i as _,o as m,m as D,n as S,j as B,k as H,q as $,t as q,u as J,v as G,w as z,x as V,y as Z,z as W}from"./assets/modalMarkups-e20d980f.js";import{i as Q,P as R,S as M,a as X}from"./assets/vendor-85c19974.js";const p=c(a.LOCAL_CART_KEY)??[],v=async e=>{const{id:t}=e.target.closest(".js-card").dataset,s=await h(t);p.some(({_id:l})=>l===s._id)||(p.push(s),i(a.LOCAL_CART_KEY,p),e.target.closest(".js-cart").innerHTML=`<button class="card-btn" type="button">
                    <svg class="card-btn-icon-check" width="18" height="18">
                        <use href="${w}#check"></use>
                    </svg>
                </button>`,Q.success({title:"OK",message:"Added to cart!"}))},ee=async e=>{const{id:t}=e.target.closest(".js-card").dataset,s=await h(t);p.some(({_id:l})=>l===s._id)||(p.push(s),i(a.LOCAL_CART_KEY,p),e.target.closest(".js-cart").innerHTML=`<button class="popular-btn-check" type="button">
                    <svg class="popular-icon-check" width="18" height="18">
                      <use href="${w}#check"></use>
                    </svg>
                </button>`,Q.success({title:"OK",message:"Added to cart!"}))};let L;const te=window.matchMedia("(min-width: 768px)"),K=e=>{e.matches?(L=4,A()):(L=2,A())};te.addEventListener("change",K);function A(){const e=c(a.PAGES).page,t=c(a.PAGES).perPage,s=c(a.PAGES).totalPages;new R(r.paginationContainer,{page:e,totalItems:t*s,itemsPerPage:t,visiblePages:L,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"}).on("beforeMove",function(u){const d=JSON.parse(localStorage.getItem("pages"));d.page=u.page,localStorage.setItem("pages",JSON.stringify(d));const j=JSON.parse(localStorage.getItem("pages")),O=c(a.LOCAL_QUERY_KEY);O.page=j.page,i(a.LOCAL_QUERY_KEY,O);const N=c(a.LOCAL_QUERY_KEY);U(N)}),JSON.parse(localStorage.getItem("pages")).totalPages<=1?r.paginationContainer.style.display="none":r.paginationContainer.style.display="block"}function T(){new R(r.paginationContainer,{page:a.INIT_QUERY.page,totalItems:c("pages").perPage*c("pages").totalPages,itemsPerPage:c("pages").perPage,visiblePages:L,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"}).on("beforeMove",function(s){const o=JSON.parse(localStorage.getItem("pages"));o.page=s.page,localStorage.setItem("pages",JSON.stringify(o));const l=JSON.parse(localStorage.getItem("pages")),u=c(a.LOCAL_QUERY_KEY);u.page=l.page,i(a.LOCAL_QUERY_KEY,u);const d=c(a.LOCAL_QUERY_KEY);U(d)}),JSON.parse(localStorage.getItem("pages")).totalPages<=1?r.paginationContainer.style.display="none":r.paginationContainer.style.display="block"}async function U(e){const t=await k(e);if(!t.results.length){notFoundMarkup(r.productList);return}r.productList.innerHTML=_(t.results)}const y=e=>{const t=c(a.LOCAL_CART_KEY)??[];return e.map(o=>t.some(({_id:u})=>u===o._id)?(o.isChecked=!0,o):(o.isChecked=!1,o))},E=async(e,t)=>{const{id:s}=e.target.closest(".js-card").dataset,o=await h(s),l=D(o);m(t,l)},g=async e=>{r.productList.innerHTML='<div class="loader-box"><span class="loader"></span></div>';const t=await k(e);if(!t.results.length){S(r.productList);return}i(a.PAGES,{page:t.page,perPage:t.perPage,totalPages:t.totalPages});const s=y(t.results);r.productList.innerHTML=_(s),T()},ae=e=>{if(e.preventDefault(),e.currentTarget!==e.target){if(e.target.closest(".js-cart")){v(e);return}E(e,r.productList)}};r.productList.addEventListener("click",ae);new M({select:"#abcField",settings:{showSearch:!1}});let Y=[];const se=[{value:"alphabetical",label:"A to Z"},{value:"reverse-alphabetical",label:"Z to A"},{value:"cheap",label:"Cheap"},{value:"expensive",label:"Expensive"},{value:"popular",label:"Popular"},{value:"not-popular",label:"Not popular"},{value:"",label:"Show all"}],re=async()=>{Y=[...await B(),"Show_all"];const t=H(Y);r.categoryField.insertAdjacentHTML("beforeend",t),r.abcField.innerHTML=$(se),new M({select:"#categoryField",settings:{placeholderText:"Categories",showSearch:!1}})},ne=async e=>{const t=e.target.value,s=c(a.LOCAL_QUERY_KEY);s.page="1",t==="Show_all"?s.category=null:s.category=t,i(a.LOCAL_QUERY_KEY,s);const o=c(a.LOCAL_SORT),l=c(a.LOCAL_QUERY_KEY);let u=f(a.BASE_URL,l);u=C(u,o);const d=await P(u);b(d)},oe=async e=>{e.preventDefault();const t=r.searchField.value,s=c(a.LOCAL_QUERY_KEY);s.page="1",t?s.keyword=t:s.keyword=null,i(a.LOCAL_QUERY_KEY,s);const o=c(a.LOCAL_SORT),l=c(a.LOCAL_QUERY_KEY);let u=f(a.BASE_URL,l);u=C(u,o);const d=await P(u);b(d)},f=(e,t)=>{let s=`${e}/products?page=${t.page}&limit=${t.limit}`;return t.keyword&&(s+=`&keyword=${t.keyword}`),t.category&&t.category!=="all"&&(s+=`&category=${ce(t.category)}`),s},ce=e=>{switch(e){case"Meat_&_Seafood":return"Meat_%26_Seafood";case"Breads_&_Bakery":return"Breads_%26_Bakery";default:return e}},C=(e,t)=>{if(t&&t!=="all")switch(t){case"alphabetical":e+="&byABC=true";break;case"reverse-alphabetical":e+="&byABC=false";break;case"cheap":e+="&byPrice=true";break;case"expensive":e+="&byPrice=false";break;case"popular":e+="&byPopularity=false";break;case"not-popular":e+="&byPopularity=true";break}return e},ie=async e=>{const t=e.target.value;i(a.LOCAL_SORT,t);const s=c(a.LOCAL_SORT),o=c(a.LOCAL_QUERY_KEY);let l=f(a.BASE_URL,o);l=C(l,s);const u=await P(l);b(u)};async function P(e){try{return(await X({url:`${e}`,method:"GET",headers:{"Content-Type":"application/json"}})).data}catch(t){return console.error("Error:",t),t}}const b=async e=>{if(!e.results.length){S(r.productList);return}i(a.PAGES,{page:e.page,perPage:e.perPage,totalPages:e.totalPages}),r.productList.innerHTML=_(e.results),T()},le=e=>{if(e.target.value===""){const t=c(a.LOCAL_QUERY_KEY);t.page="1",t.keyword=null,i(a.LOCAL_QUERY_KEY,t);const s=c(a.LOCAL_QUERY_KEY);g(s)}};r.form.addEventListener("submit",oe);r.categoryField.addEventListener("change",ne);r.abcField.addEventListener("change",ie);r.searchField.addEventListener("input",le);const ue=async()=>{const e=await q();if(!e.length){notFoundMarkup(r.popularProductList);return}const t=y(e),s=J(t);r.popularProductList.insertAdjacentHTML("beforeend",s)},de=e=>{if(e.preventDefault(),e.target.closest(".js-cart")){ee(e);return}E(e,r.popularProductList)};r.popularProductList.addEventListener("click",de);const ge=e=>{const t=[],s=[];for(;t.length<a.NUMBER_OF_DISCOUNT;){const o=Math.floor(Math.random()*e.length);s.includes(o)||(s.push(o),t.push(e[o]))}return t},pe=async()=>{const e=await G(),t=ge(e),s=y(t),o=z(s);r.dicsProd.innerHTML=o},Le=e=>{if(e.preventDefault(),e.target.closest(".js-cart")){v(e);return}E(e,r.discProdList)};r.discProdList.addEventListener("click",Le);const me=()=>{r.emailForm.addEventListener("submit",he)},he=e=>{e.preventDefault();const t=r.emailInput.value.trim();t&&_e(t)};async function _e(e){const t=await V(e);switch(t){case 201:m(r.emailForm,W);break;case 409:m(r.emailForm,Z);break}return t}const I=window.matchMedia("(min-width: 768px)"),F=window.matchMedia("(min-width: 1440px)"),x=window.matchMedia("(max-width: 767.9px)"),ye=window.matchMedia("(max-width: 1439.9px)"),Ee=window.matchMedia("(min-width: 768px) and (max-width: 1439.9px)");i(a.LOCAL_QUERY_KEY,a.INIT_QUERY);const n=c(a.LOCAL_QUERY_KEY)??[];re();F.matches&&Object.keys(n).length&&(n.limit=9,i(a.LOCAL_QUERY_KEY,n),g(n));Ee.matches&&Object.keys(n).length&&(n.limit=8,i(a.LOCAL_QUERY_KEY,n),g(n));x.matches&&Object.keys(n).length&&(n.limit=6,i(a.LOCAL_QUERY_KEY,n),g(n));K(I);ue();pe();me();I.addListener(e=>{e.matches&&Object.keys(n).length&&(n.limit=8,i(a.LOCAL_QUERY_KEY,n),g(n))});F.addListener(e=>{e.matches&&Object.keys(n).length&&(n.limit=9,i(a.LOCAL_QUERY_KEY,n),g(n))});ye.addListener(e=>{e.matches&&Object.keys(n).length&&(n.limit=8,i(a.LOCAL_QUERY_KEY,n),g(n))});x.addListener(e=>{e.matches&&Object.keys(n).length&&(n.limit=6,i(a.LOCAL_QUERY_KEY,n),g(n))});
//# sourceMappingURL=commonHelpers2.js.map
